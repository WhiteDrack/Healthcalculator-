<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Orbital Scanner</title>
    <style>
        :root { --neon: #00f2ff; }
        body { background: #000; color: white; font-family: sans-serif; text-align: center; margin: 0; overflow: hidden; }
        .camera-container { position: relative; width: 100vw; height: 70vh; background: #111; }
        video { width: 100%; height: 100%; object-fit: cover; }
        #canvas-ui { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .controls { height: 30vh; background: #111; padding: 20px; border-top: 2px solid var(--neon); }
        .btn { background: var(--neon); color: black; border: none; padding: 15px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; }
        #result-display { margin-top: 15px; font-size: 1.2rem; color: var(--neon); font-family: monospace; }
    </style>
</head>
<body>

<div class="camera-container">
    <video id="video" autoplay playsinline></video>
    <canvas id="canvas-ui"></canvas>
</div>

<div class="controls">
    <button class="btn" onclick="initScanner()">ACTIVATE CAMERA</button>
    <div id="result-display">POINT AT CENTER OF CODE</div>
    <div id="debug" style="font-size: 10px; color: #555;">Scanning pixels...</div>
</div>

<script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas-ui');
    const ctx = canvas.getContext('2d');
    const resultDisplay = document.getElementById('result-display');

    async function initScanner() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ 
                video: { facingMode: "environment", width: 640, height: 640 } 
            });
            video.srcObject = stream;
            requestAnimationFrame(processScan);
        } catch (err) {
            alert("Camera Error: " + err.message);
        }
    }

    function processScan() {
        if (video.readyState === video.HAVE_ENOUGH_DATA) {
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;

            // 1. Draw Target UI
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = "#00f2ff";
            ctx.lineWidth = 2;
            
            // Draw Target Rings
            for(let r=1; r<=5; r++) {
                ctx.beginPath();
                ctx.arc(cx, cy, r * 30, 0, Math.PI * 2);
                ctx.stroke();
            }

            // 2. Pixel Sensing Logic (Yahi asli scanning hai)
            // Hum center se bahar ki taraf rings ke color check kar rahe hain
            let binaryResult = "";
            const tempCanvas = document.createElement('canvas');
            const tCtx = tempCanvas.getContext('2d');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            tCtx.drawImage(video, 0, 0);

            // 3 rings ka data check karte hain
            for(let i=1; i<=3; i++) {
                let pixel = tCtx.getImageData(cx, cy - (i * 30 + 10), 1, 1).data;
                // Agar pixel ka rang dark hai (Kala) toh '1', warna '0'
                let brightness = (pixel[0] + pixel[1] + pixel[2]) / 3;
                binaryResult += (brightness < 100) ? "1" : "0";
            }

            // 3. Result Nikalein
            if (binaryResult.includes("1")) {
                resultDisplay.innerText = "CODE DETECTED: " + decodeBinary(binaryResult);
                resultDisplay.style.color = "#00ff00";
            } else {
                resultDisplay.innerText = "ALIGNING...";
                resultDisplay.style.color = "#00f2ff";
            }
        }
        requestAnimationFrame(processScan);
    }

    function decodeBinary(bin) {
        // Yeh ek mapping hai jo binary ko text mein badalti hai
        const codes = {
            "111": "ADMIN-ACCESS",
            "101": "USER-786",
            "011": "VALID-KEY",
            "110": "SECURE-ID"
        };
        return codes[bin] || "SCANNING...";
    }
</script>

</body>
</html>

